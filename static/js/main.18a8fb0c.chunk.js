(this["webpackJsonpstocks-app"]=this["webpackJsonpstocks-app"]||[]).push([[0],{175:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(12),r=a.n(o),i=(a(73),a(31)),l=a(41),s=a(58),m=(a(74),a(198)),u=a(193),d=a(195),p=a(196),g=a(197),f=Object(u.a)((function(e){return{root:{flexGrow:1,marginBottom:10},paper:{padding:e.spacing(2),margin:"auto",maxWidth:500}}})),E=function(e){var t=f();return c.a.createElement("div",{className:t.root},c.a.createElement(d.a,{className:t.paper},c.a.createElement(p.a,{container:!0,spacing:2},c.a.createElement(p.a,{item:!0,xs:12,sm:!0,container:!0},c.a.createElement(p.a,{item:!0,xs:!0,container:!0,direction:"row",spacing:2},c.a.createElement(p.a,{item:!0,container:!0,direction:"column",xs:!0},c.a.createElement(p.a,{item:!0},c.a.createElement(g.a,{variant:"h5"},e.data.name)),c.a.createElement(p.a,{item:!0},c.a.createElement(g.a,{variant:"caption"},"Price: $",Number.parseFloat(e.data.price).toFixed(3)))),c.a.createElement(p.a,{item:!0},c.a.createElement(g.a,{variant:"caption"},"Updated On:"),c.a.createElement(g.a,{variant:"body2"},e.data.updatedTimeStamp.getMonth()+1+"/"+e.data.updatedTimeStamp.getDate()+"/"+e.data.updatedTimeStamp.getFullYear()),c.a.createElement(g.a,{variant:"body2"},e.data.updatedTimeStamp.getUTCHours()+":"+e.data.updatedTimeStamp.getUTCMinutes()+":"+e.data.updatedTimeStamp.getUTCSeconds())),c.a.createElement(p.a,{item:!0},c.a.createElement(m.a,{onClick:function(){e.selectChart(e.data.name)}},"See chart")))))))},h=a(63),b=function(e){var t={labels:e.data.map((function(e){return(t=e.time).getUTCHours()+1+"/"+t.getUTCMinutes()+"/"+t.getUTCSeconds();var t})),datasets:[{label:"Revenue",fill:!1,backgroundColor:"blue",borderColor:"blue",pointBorderColor:"blue",pointRadius:1,data:e.data.map((function(e){return e.price}))}]};return c.a.createElement("div",null,c.a.createElement(h.Line,{data:t}))},v=Object(u.a)((function(e){return{root:{flexGrow:1},stocks:{paddingBottom:10}}})),S=new WebSocket("wss://trades-api.herokuapp.com/stocks");var k=function(){var e=Object(n.useState)(new Map),t=Object(i.a)(e,2),a=t[0],o=t[1],r=Object(n.useState)(!1),m=Object(i.a)(r,2),u=m[0],d=m[1],p=Object(n.useState)([{price:21,time:new Date},{price:11,time:new Date}]),g=Object(i.a)(p,2),f=g[0],h=g[1];Object(n.useEffect)((function(){return S.onopen=function(){console.log("connection Established")},function(){S.close(),console.log("connection closed")}}),[]),Object(n.useEffect)((function(){console.log("pauseStockUpdate"),S.onmessage=function(e){u||o(new Map(function(e,t){var a,n=JSON.parse(e),c=new Date,o=Object(s.a)(n);try{for(o.s();!(a=o.n()).done;){var r=a.value;if(t.has(r[0])){var i=t.get(r[0]);t.set(r[0],{updatedTimeStamp:c,change:i.price-r[1],price:r[1],history:0!==i.history.length?[].concat(Object(l.a)(i.history),[{price:i.price,time:c}]):[{price:i.price,time:c}],name:r[0]})}else t.set(r[0],{updatedTimeStamp:c,change:0,price:r[1],history:[],name:r[0]})}}catch(m){o.e(m)}finally{o.f()}return console.log(t),t}(e.data,a)))}}),[u,a]);var k=v(),w=function(e){h(a.get(e).history)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Stocks App"),c.a.createElement("div",null,"Inside the Stocks"),c.a.createElement("button",{onClick:function(){d(!u)}},"Pause Stock updates"),c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"25% auto",gap:"20"}},c.a.createElement("section",{className:k.root},Object(l.a)(a.values()).map((function(e,t){return c.a.createElement(E,{className:k.stocks,key:"stock-"+t,data:e,selectChart:w})}))),c.a.createElement("section",null,c.a.createElement("div",null,"This space is for chart"),c.a.createElement(b,{data:f}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},68:function(e,t,a){e.exports=a(175)},73:function(e,t,a){},74:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.18a8fb0c.chunk.js.map